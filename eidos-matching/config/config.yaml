service:
  name: eidos-matching
  node_id: ${NODE_ID:engine-1}
  grpc_port: 50052
  http_port: 8080
  env: ${ENV:dev}

nacos:
  server_addr: ${NACOS_SERVER_ADDR:nacos:8848}
  namespace: ${NACOS_NAMESPACE:eidos-dev}
  group: EIDOS_GROUP

redis:
  addresses:
    - ${REDIS_ADDR:redis:6379}
  password: ${REDIS_PASSWORD:}
  db: 0
  pool_size: 100
  tls_enabled: ${REDIS_TLS_ENABLED:false}

kafka:
  brokers:
    - ${KAFKA_BROKERS:kafka:9092}
  consumer:
    group_id: eidos-matching
    topics:
      - orders
      - cancel-requests
    batch_size: 100
    linger_ms: 5
  producer:
    compression: lz4
    batch_size: 1000
    batch_timeout_ms: 10
    required_acks: -1  # all

# 市场配置
# TODO: 从配置中心 (Nacos/eidos-admin) 动态加载
markets:
  - symbol: BTC-USDC
    base_token: BTC
    quote_token: USDC
    price_decimals: 8
    size_decimals: 8
    min_size: "0.0001"
    tick_size: "0.01"
    maker_fee_rate: "0.0005"
    taker_fee_rate: "0.001"
    max_slippage: "0.05"
  - symbol: ETH-USDC
    base_token: ETH
    quote_token: USDC
    price_decimals: 8
    size_decimals: 8
    min_size: "0.001"
    tick_size: "0.01"
    maker_fee_rate: "0.0005"
    taker_fee_rate: "0.001"
    max_slippage: "0.05"

# 快照配置
snapshot:
  interval: 30s
  max_count: 10
  two_phase: true

# 高可用配置
ha:
  enabled: ${HA_ENABLED:false}
  heartbeat_interval: 100ms
  failover_timeout: 500ms

log:
  level: ${LOG_LEVEL:info}
  format: json
