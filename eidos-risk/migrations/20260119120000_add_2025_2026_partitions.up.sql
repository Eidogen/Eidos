-- eidos-risk 数据库迁移脚本
-- 版本: 002
-- 描述: 添加 2025 年剩余分区和 2026 年分区

-- =============================================================================
-- 1. risk_events 表分区
-- =============================================================================

-- 2025 年剩余分区 (4月-12月)
CREATE TABLE IF NOT EXISTS risk_events_2025_04 PARTITION OF risk_events
    FOR VALUES FROM (1743465600000) TO (1746057600000);
CREATE TABLE IF NOT EXISTS risk_events_2025_05 PARTITION OF risk_events
    FOR VALUES FROM (1746057600000) TO (1748736000000);
CREATE TABLE IF NOT EXISTS risk_events_2025_06 PARTITION OF risk_events
    FOR VALUES FROM (1748736000000) TO (1751328000000);
CREATE TABLE IF NOT EXISTS risk_events_2025_07 PARTITION OF risk_events
    FOR VALUES FROM (1751328000000) TO (1754006400000);
CREATE TABLE IF NOT EXISTS risk_events_2025_08 PARTITION OF risk_events
    FOR VALUES FROM (1754006400000) TO (1756684800000);
CREATE TABLE IF NOT EXISTS risk_events_2025_09 PARTITION OF risk_events
    FOR VALUES FROM (1756684800000) TO (1759276800000);
CREATE TABLE IF NOT EXISTS risk_events_2025_10 PARTITION OF risk_events
    FOR VALUES FROM (1759276800000) TO (1761955200000);
CREATE TABLE IF NOT EXISTS risk_events_2025_11 PARTITION OF risk_events
    FOR VALUES FROM (1761955200000) TO (1764547200000);
CREATE TABLE IF NOT EXISTS risk_events_2025_12 PARTITION OF risk_events
    FOR VALUES FROM (1764547200000) TO (1767225600000);

-- 2026 年分区 (1月-12月)
CREATE TABLE IF NOT EXISTS risk_events_2026_01 PARTITION OF risk_events
    FOR VALUES FROM (1767225600000) TO (1769904000000);
CREATE TABLE IF NOT EXISTS risk_events_2026_02 PARTITION OF risk_events
    FOR VALUES FROM (1769904000000) TO (1772323200000);
CREATE TABLE IF NOT EXISTS risk_events_2026_03 PARTITION OF risk_events
    FOR VALUES FROM (1772323200000) TO (1775001600000);
CREATE TABLE IF NOT EXISTS risk_events_2026_04 PARTITION OF risk_events
    FOR VALUES FROM (1775001600000) TO (1777593600000);
CREATE TABLE IF NOT EXISTS risk_events_2026_05 PARTITION OF risk_events
    FOR VALUES FROM (1777593600000) TO (1780272000000);
CREATE TABLE IF NOT EXISTS risk_events_2026_06 PARTITION OF risk_events
    FOR VALUES FROM (1780272000000) TO (1782864000000);
CREATE TABLE IF NOT EXISTS risk_events_2026_07 PARTITION OF risk_events
    FOR VALUES FROM (1782864000000) TO (1785542400000);
CREATE TABLE IF NOT EXISTS risk_events_2026_08 PARTITION OF risk_events
    FOR VALUES FROM (1785542400000) TO (1788220800000);
CREATE TABLE IF NOT EXISTS risk_events_2026_09 PARTITION OF risk_events
    FOR VALUES FROM (1788220800000) TO (1790812800000);
CREATE TABLE IF NOT EXISTS risk_events_2026_10 PARTITION OF risk_events
    FOR VALUES FROM (1790812800000) TO (1793491200000);
CREATE TABLE IF NOT EXISTS risk_events_2026_11 PARTITION OF risk_events
    FOR VALUES FROM (1793491200000) TO (1796083200000);
CREATE TABLE IF NOT EXISTS risk_events_2026_12 PARTITION OF risk_events
    FOR VALUES FROM (1796083200000) TO (1798761600000);

-- =============================================================================
-- 2. risk_audit_logs 表分区
-- =============================================================================

-- 2025 年剩余分区 (4月-12月)
CREATE TABLE IF NOT EXISTS risk_audit_logs_2025_04 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1743465600000) TO (1746057600000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2025_05 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1746057600000) TO (1748736000000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2025_06 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1748736000000) TO (1751328000000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2025_07 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1751328000000) TO (1754006400000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2025_08 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1754006400000) TO (1756684800000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2025_09 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1756684800000) TO (1759276800000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2025_10 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1759276800000) TO (1761955200000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2025_11 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1761955200000) TO (1764547200000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2025_12 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1764547200000) TO (1767225600000);

-- 2026 年分区 (1月-12月)
CREATE TABLE IF NOT EXISTS risk_audit_logs_2026_01 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1767225600000) TO (1769904000000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2026_02 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1769904000000) TO (1772323200000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2026_03 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1772323200000) TO (1775001600000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2026_04 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1775001600000) TO (1777593600000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2026_05 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1777593600000) TO (1780272000000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2026_06 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1780272000000) TO (1782864000000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2026_07 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1782864000000) TO (1785542400000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2026_08 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1785542400000) TO (1788220800000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2026_09 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1788220800000) TO (1790812800000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2026_10 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1790812800000) TO (1793491200000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2026_11 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1793491200000) TO (1796083200000);
CREATE TABLE IF NOT EXISTS risk_audit_logs_2026_12 PARTITION OF risk_audit_logs
    FOR VALUES FROM (1796083200000) TO (1798761600000);
